function Selection(e){var t=this;this.input=e.find(".select"),this.option=e.find(".select-option"),this.input.click(function(e){e.stopPropagation(),selectOptions.hide(),console.log(this),t.option.show()}),this.option.click(function(e){e.stopPropagation();var l=$(e.target);t.input.html(l.html()),t.input.data("value",l.data("value")),t.option.hide()})}function generateNums(e,t,l,n,i){var a,o=[],s=0,u=l;a=1==t?9:2==t?90:900;for(var r=0;r<2*u-1;r++)if(r%2==0){var m;o.length>=1&&"-"==o[o.length-1]?(m=Math.ceil(Math.random()*(s-1)),s>=a&&(m=Math.ceil(Math.random()*a)),0==m&&(o[o.length-1]="+",m=5)):m=Math.ceil(Math.random()*a),o.push(m),s+=0==r?m:Number(o[o.length-2]+o[o.length-1])}else{if(n)var c=0==Math.floor(2.5*Math.random())?"-":"+";else c="+";o.push(c)}var g=o.join(" ")+" = "+s;console.log(g),showNums(e,l,o,s,g,i)}function showNums(e,t,l,n,i,a){for(var o=[],s=0;s<t;s++)0===s?o.push(l[0]):o.push("+"===l[2*s-1]?l[2*s]:"-"+l[2*s]);if(timeout=setTimeout(function(){singleNumStage.hide(),scrollNumStage.hide(),resultBtn.show(),resultBtn.click(function(){sumStage.html(n),sumStage.show(),result.html(i),resultBtn.hide()})},1e3*e*t+1e3),console.log(a),0==a){scrollNumStage.hide(),singleNumStage.show();var u=0;singleNumStage.html(""),singleNumStage.html(o[u]),u++,interval=setInterval(function(){u<t?(singleNumStage.html(""),singleNumStage.html(o[u]),u++):clearInterval(interval)},1e3*e)}else if(singleNumStage.hide(),scrollNumStage.show(),scrollNumStage.html(o.join("<br>")),1===a)scrollNumStage.css("margin-top",numStage.height()-40+"px"),scrollNumStage.animate({marginTop:-scrollNumStage.height()-20+"px"},1e3*e*t);else{scrollNumStage.css("margin-top","100px");u=0;scrollNumStage.html(o.join("<br>")),u++,interval=setInterval(function(){u<t?(o.shift(),scrollNumStage.html(o.join("<br>")),u++):clearInterval(interval)},1e3*e)}}var rightSide=$(".right"),kouNumEl=$("#kouNum"),jiajianEl=$("#jiajian"),btn=$("#btn"),numStage=$("#num-stage"),sumStage=$("#sum-stage"),scrollNumStage=$("#num-stage .scroll-mode"),singleNumStage=$("#num-stage .single-mode"),result=$("#result"),resultBtn=$("#result-btn"),selectOptions=$(".select-option");Selection.prototype.getData=function(){return this.input.data("value")},$(document).click(function(){selectOptions.hide()});var interval,timeout,speedSelect=new Selection($("#speed")),levelSelect=new Selection($("#level")),modeSelect=new Selection($("#mode"));btn.click(function(){clearInterval(interval),clearTimeout(timeout),result.html(""),scrollNumStage.html(""),singleNumStage.html(""),scrollNumStage.hide(),singleNumStage.hide(),sumStage.hide(),resultBtn.hide(),scrollNumStage.stop(),rightSide.css({background:"#f3f4f5"});var e=speedSelect.getData(),t=levelSelect.getData(),l=parseInt(kouNumEl.val())||10,n=jiajianEl.is(":checked"),i=modeSelect.getData();setTimeout(function(){rightSide.css({background:"#fff"}),generateNums(e,t,l,n,i)},400)});