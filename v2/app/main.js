function Selection(t){var e=this;this.input=t.find(".select"),this.option=t.find(".select-option"),this.input.click(function(t){t.stopPropagation(),selectOptions.hide(),console.log(this),e.option.show()}),this.option.click(function(t){t.stopPropagation();var n=$(t.target);e.input.html(n.html()),e.input.data("value",n.data("value")),e.option.hide()})}function generateNums(t,e,n,l){var a,i=[],o=0,s=n;a=1==e?9:2==e?90:900;for(var c=0;c<2*s-1;c++)if(c%2==0){var u;i.length>=1&&"-"==i[i.length-1]?(u=Math.ceil(Math.random()*(o-1)),o>=a&&(u=Math.ceil(Math.random()*a)),0==u&&(i[i.length-1]="+",u=5)):u=Math.ceil(Math.random()*a),i.push(u),o+=0==c?u:Number(i[i.length-2]+i[i.length-1])}else{if(l)var r=0==Math.floor(2.5*Math.random())?"-":"+";else r="+";i.push(r)}var h=i.join(" ")+" = "+o;console.log(h),showNums(t,n,i,o,h)}function showNums(t,e,n,l,a){for(var i=[],o=0;o<e;o++)0===o?i.push(n[0]):i.push("+"===n[2*o-1]?n[2*o]:"-"+n[2*o]);var s=0;interval=setInterval(function(){s<e?(numStage.html(i[s]),s++):(finish(t,l,a,e),clearInterval(interval))},1e3*t)}function finish(t,e,n,l){setTimeout(function(){numStage.html("<span style='color:black'>"+e+"</span>"),result.html(n)},2e3*t)}var kouNumEl=$("#kouNum"),jiajianEl=$("#jiajian"),btn=$("#btn"),numStage=$("#num-stage"),result=$("#result"),selectOptions=$(".select-option");Selection.prototype.getData=function(){return this.input.data("value")},$(document).click(function(){selectOptions.hide()});var interval,speedSelect=new Selection($("#speed")),levelSelect=new Selection($("#level")),modeSelect=new Selection($("#mode"));btn.click(function(){clearInterval(interval),result.html(""),numStage.html("");generateNums(speedSelect.getData(),levelSelect.getData(),parseInt(kouNumEl.val())||10,jiajianEl.is(":checked"))});