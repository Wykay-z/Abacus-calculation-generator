function Selection(e){var t=this;this.input=e.find(".select"),this.option=e.find(".select-option"),this.input.click(function(e){e.stopPropagation(),selectOptions.hide(),console.log(this),t.option.show()}),this.option.click(function(e){e.stopPropagation();var l=$(e.target);t.input.html(l.html()),t.input.data("value",l.data("value")),t.option.hide()})}function generateNums(e,t,l,a){var n,i=[],o=0,s=l;n=1==t?9:2==t?90:900;for(var u=0;u<2*s-1;u++)if(u%2==0){var r;i.length>=1&&"-"==i[i.length-1]?(r=Math.ceil(Math.random()*(o-1)),o>=n&&(r=Math.ceil(Math.random()*n)),0==r&&(i[i.length-1]="+",r=5)):r=Math.ceil(Math.random()*n),i.push(r),o+=0==u?r:Number(i[i.length-2]+i[i.length-1])}else{if(a)var m=0==Math.floor(2.5*Math.random())?"-":"+";else m="+";i.push(m)}var c=i.join(" ")+" = "+o;console.log(c),showNums(e,l,i,o,c)}function showNums(e,t,l,a,n){for(var i=[],o=0;o<t;o++)0===o?i.push(l[0]):i.push("+"===l[2*o-1]?l[2*o]:"-"+l[2*o]);timeout=setTimeout(function(){singleNumStage.hide(),scrollNumStage.hide(),sumStage.html(a),sumStage.show(),result.html(n)},1e3*e*t+1e3);var s=modeSelect.getData();if(0===s){scrollNumStage.hide(),singleNumStage.show();var u=0;interval=setInterval(function(){u<t?(singleNumStage.html(""),singleNumStage.html(i[u]),u++):clearInterval(interval)},1e3*e)}else{singleNumStage.hide(),scrollNumStage.show(),scrollNumStage.html(i.join("<br>"));var r=scrollNumStage.height()-numStage.height();if(1===s)r>0&&scrollNumStage.animate({marginTop:-r-10+"px"},1e3*e*t);else{u=0;interval=setInterval(function(){u<t?(i.shift(),scrollNumStage.html(i.join("<br>")),u++):clearInterval(interval)},1e3*e)}}}var kouNumEl=$("#kouNum"),jiajianEl=$("#jiajian"),btn=$("#btn"),numStage=$("#num-stage"),sumStage=$("#sum-stage"),scrollNumStage=$("#num-stage .scroll-mode"),singleNumStage=$("#num-stage .single-mode"),result=$("#result"),selectOptions=$(".select-option");Selection.prototype.getData=function(){return this.input.data("value")},$(document).click(function(){selectOptions.hide()});var interval,timeout,speedSelect=new Selection($("#speed")),levelSelect=new Selection($("#level")),modeSelect=new Selection($("#mode"));btn.click(function(){clearInterval(interval),clearTimeout(timeout),result.html(""),scrollNumStage.hide(),singleNumStage.hide(),sumStage.hide(),scrollNumStage.stop(),scrollNumStage.css("margin-top","100px");generateNums(speedSelect.getData(),levelSelect.getData(),parseInt(kouNumEl.val())||10,jiajianEl.is(":checked"))});